runcode:
  process:
    process_type: 'interpolated-script-cmd'
    interpreter: bash
    script: |
      cd {workingdir}
      voms-proxy-info
      cd python/
      python runner.py -d data TTToHadronic TTToSemiLeptonic TTTo2L2Nu ZZ4b ZH4b HH4b   -p analysis/processors/processor_HH4b.py  -y UL17 UL18 UL16_preVFP UL16_postVFP -o {output_file} -op analysis/hists/ 
  environment:
    environment_type: 'docker-encapsulated'
    image: gitlab-registry.cern.ch/cms-cmu/coffea4bees
    imagetag: latest
    resources:
      - voms_proxy: true
      - kubernetes_memory_limit: '9.5Gi'
  publisher:
    publisher_type: interpolated-pub
    glob: true
    publish: 
      output_coffea: python/analysis/hists/histAll.coffea 

runplots:
  process:
    process_type: 'interpolated-script-cmd'
    interpreter: bash
    script: |
      cd {workingdir}/python/
      python analysis/makePlots.py --doTest -i analysis/hists/histAll.coffea -o analysis/testCoffeaPlots -m analysis/metadata/plotsAll.yml
  environment:
    environment_type: 'docker-encapsulated'
    image: gitlab-registry.cern.ch/cms-cmu/coffea4bees
    imagetag: latest
  publisher:
    publisher_type: interpolated-pub
    glob: true
    publish: 
      output_coffea: python/analysis/hists/histAll.coffea 
